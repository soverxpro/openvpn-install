## OpenVPN-install

**OpenVPN-install: Установка OpenVPN для Debian, Ubuntu, Fedora, CentOS, Arch Linux, Oracle Linux, Rocky Linux и AlmaLinux**

Этот скрипт позволяет быстро и легко настроить собственный защищенный VPN-сервер.

Вы также можете попробовать [wireguard-install](https://github.com/angristan/wireguard-install), простой установщик для более простого, безопасного, быстрого и современного VPN-протокола.

## Использование

**1. Загрузите и сделайте скрипт исполняемым:**

```bash
curl -O https://raw.githubusercontent.com/angristan/openvpn-install/master/openvpn-install.sh
chmod +x openvpn-install.sh
```

**2. Запустите скрипт:**

```sh
./openvpn-install.sh
```

**Важно:**

* Для запуска скрипта требуются права root и включенный модуль TUN.
* При первом запуске скрипта вам нужно будет следовать инструкциям на экране, чтобы настроить VPN-сервер.

**После установки OpenVPN вы можете снова запустить скрипт, чтобы:**

* Добавить нового клиента
* Удалить клиента
* Удалить OpenVPN

Сгенерированные файлы конфигурации клиента (`.ovpn`) будут размещены в вашем домашнем каталоге. Вы можете скачать их со своего сервера и использовать их с вашим любимым клиентом OpenVPN.

**Прежде чем просить о помощи:**

* Сначала обратитесь к разделу [FAQ](#faq). Внимательно прочитайте все, прежде чем создавать новую проблему.
* **Не отправляйте электронные письма или личные сообщения с просьбой о помощи.** Единственное место, где можно получить помощь, - это система отслеживания проблем на GitHub. Другие пользователи могут вам помочь, а ваш вопрос может быть актуальным для других в будущем. Мое время ограничено, и я не могу предоставлять личную поддержку.

### Бесчеловечная установка

Скрипт также можно запустить в безлюдном режиме, что означает, что он не потребует ввода пользователем во время процесса установки. Это полезно для автоматизированных развертываний.

**Вот как запустить скрипт в безлюдном режиме:**

```bash
AUTO_INSTALL=y ./openvpn-install.sh

# или

export AUTO_INSTALL=y
./openvpn-install.sh
```

Это будет использовать предопределенный набор переменных, устраняя необходимость взаимодействия с пользователем.

**Вот некоторые дополнительные параметры, которые вы можете использовать для безлюдных установок:**

* `APPROVE_INSTALL=y`: Автоматически одобрить установку.
* `APPROVE_IP=y`: Автоматически одобрить IP-адрес сервера.
* `IPV6_SUPPORT=n`: Отключить поддержку IPv6 (по умолчанию включено).
* `PORT_CHOICE=1`: Выберите порт для использования (по умолчанию 1194).
* `PROTOCOL_CHOICE=1`: Выберите протокол для использования (по умолчанию UDP).
* `DNS=1`: Включить настройки DNS для клиентов.
* `COMPRESSION_ENABLED=n`: Отключить сжатие (по умолчанию отключено).
* `CUSTOMIZE_ENC=n`: Отключить пользовательские настройки шифрования.
* `CLIENT=clientname`: Указать имя добавляемого клиента.
* `PASS=1`: Включить защиту паролем для клиентов.

**Примечание:** Защита паролем клиентов не поддерживается при использовании метода безлюдной установки из-за ограничений Easy-RSA (компонента, используемого для генерации сертификатов).

Безлюдная установка спроектирована так, чтобы быть идемпотентной, то есть вы можете запускать ее несколько раз с одинаковыми параметрами без каких-либо проблем. Он установит OpenVPN и его зависимости только в том случае, если они еще не установлены, и он будет регенерировать PKI (сертификаты сервера) только в случае необходимости. Однако он воссоздаст все локальные файлы конфигурации и перегенерирует файл конфигурации клиента при каждом запуске.

### Безлюдное добавление пользователей

Вы также можете автоматизировать добавление новых пользователей с помощью скрипта в безлюдном режиме. Вот как:

```bash
#!/bin/bash
export MENU_OPTION="1"
export CLIENT="foo"
export PASS="1"
./openvpn-install.sh
```

Этот скрипт добавит нового пользователя с именем "foo" в вашу существующую конфигурацию OpenVPN.

